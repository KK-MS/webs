<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1091px" preserveAspectRatio="none" style="width:1880px;height:1091px;" version="1.1" viewBox="0 0 1880 1091" width="1880px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qb7zvlpssfmp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="267" x="805.625" y="26.708">Server.cpp Part:3 (Streaming)</text><ellipse cx="813" cy="40.9531" fill="#000000" filter="url(#f1qb7zvlpssfmp)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="765" y="70.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="775" y="92.0918">image size</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="748.5" y="124.9219"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="758.5" y="146.0605">int size = 172800</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="734.5" y="178.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="744.5" y="200.0293">int frame_counter = 0</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="219" x="703.5" y="232.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="199" x="713.5" y="253.998">char*image=(char*)malloc(size)</text><polygon fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" points="710.5,286.8281,915.5,286.8281,927.5,298.8281,915.5,310.8281,710.5,310.8281,698.5,298.8281,710.5,286.8281" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="718.5" y="302.6362">Simple image buffer 320 * 180 * 3</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="682.5" y="296.2339">for</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="16" x="927.5" y="296.2339">for</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="188" x="360.25" y="320.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="374.25" y="341.9668"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="374.25" y="341.9668">for(int i =0; i&lt;size;i++)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="538.25" y="341.9668"/><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="155" x="376.75" y="374.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="430.75" y="395.9355"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="430.75" y="395.9355">image[i]=127</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="1142.25" y="320.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="39" x="1152.25" y="341.9668">for (;;)</text><path d="M1459.25,392.0195 L1459.25,415.7188 L1439.25,419.7188 L1459.25,423.7188 L1459.25,447.418 A0,0 0 0 0 1459.25,447.418 L1868.25,447.418 A0,0 0 0 0 1868.25,447.418 L1868.25,402.0195 L1858.25,392.0195 L1459.25,392.0195 A0,0 0 0 0 1459.25,392.0195 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1858.25,392.0195 L1858.25,402.0195 L1868.25,402.0195 L1858.25,392.0195 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1470.75" cy="404.6523" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="1476.25" y="409.0864">This function returns int value of shared variable.</text><ellipse cx="1470.75" cy="419.7852" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="1476.25" y="424.2192">User can select the Maximum color value (between 1-255).</text><ellipse cx="1470.75" cy="434.918" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="1476.25" y="439.3521">Binary Frame- buffer of bytes (0-255)</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="89.8438" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="535" x="904.25" y="374.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="918.25" y="395.9355">webserver_</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="992.25" y="395.9355">getIntValueByName</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="1132.25" y="395.9355">("max_ color",255)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="918.25" y="409.9043"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="515" x="914.25" y="423.873">std::string room::getStringValueByName (std::string name , std::string default_val)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="918.25" y="437.8418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="440" x="914.25" y="451.8105">Value of HTML tag "max_color", Second parameter is value "max_color"</text><polygon fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" points="1103.75,484.6406,1239.75,484.6406,1251.75,496.6406,1239.75,508.6406,1103.75,508.6406,1091.75,496.6406,1103.75,484.6406" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="1103.75" y="500.4487">if webserver_ isRunning</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="7" x="1084.75" y="494.0464">If</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="24" x="1251.75" y="494.0464">else</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="383" x="652.75" y="518.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="662.75" y="539.7793">( webserver_</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="745.75" y="539.7793">getBoolValueByName</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="897.75" y="539.7793">("stream_ en",false)</text><path d="M1130.25,632.9023 L1130.25,641.4688 L1110.25,645.4688 L1130.25,649.4688 L1130.25,658.0352 A0,0 0 0 0 1130.25,658.0352 L1451.25,658.0352 A0,0 0 0 0 1451.25,658.0352 L1451.25,642.9023 L1441.25,632.9023 L1130.25,632.9023 A0,0 0 0 0 1130.25,632.9023 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1441.25,632.9023 L1441.25,642.9023 L1451.25,642.9023 L1441.25,632.9023 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1141.75" cy="645.5352" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="1147.25" y="649.9692">This function allows to stream buffer of bytes.</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="145.7188" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="532" x="578.25" y="572.6094"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="324" x="588.25" y="593.748">webserver_ streamBuffer(image, size, "main")</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="592.25" y="607.7168"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="325" x="588.25" y="621.6855">void room::streamBuffer( char* buffer, int size , std::</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="913.25" y="621.6855">string header</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="5" x="1010.25" y="621.6855">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="592.25" y="635.6543"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="588.25" y="649.623">buffer Array of chars</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="592.25" y="663.5918"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="588.25" y="677.5605">size: Size of buffer</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="592.25" y="691.5293"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="512" x="588.25" y="705.498">header:Some header for buffer. Some information what buffer contains.</text><path d="M1547.25,523.0586 L1547.25,531.625 L1527.25,535.625 L1547.25,539.625 L1547.25,548.1914 A0,0 0 0 0 1547.25,548.1914 L1713.25,548.1914 A0,0 0 0 0 1713.25,548.1914 L1713.25,533.0586 L1703.25,523.0586 L1547.25,523.0586 A0,0 0 0 0 1547.25,523.0586 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1703.25,523.0586 L1703.25,533.0586 L1713.25,533.0586 L1703.25,523.0586 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1558.75" cy="535.6914" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="1564.25" y="540.1255">server is not Running</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="1471.25" y="518.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="1481.25" y="539.7793">break</text><polygon fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" points="1171.75,724.3281,1183.75,736.3281,1171.75,748.3281,1159.75,736.3281,1171.75,724.3281" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" points="813,754.3281,825,766.3281,813,778.3281,801,766.3281,813,754.3281" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M10,837.668 L10,862.8008 L605,862.8008 L605,847.668 L595,837.668 L10,837.668 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M595,837.668 L595,847.668 L605,847.668 L595,837.668 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="21.5" cy="850.3008" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="563" x="27" y="854.7349">This function prepares value for future send to all clients. It allows to share some results.</text><path d="M1021,837.668 L1021,862.8008 L1247,862.8008 L1247,847.668 L1237,837.668 L1021,837.668 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1237,837.668 L1237,847.668 L1247,847.668 L1237,837.668 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1032.5" cy="850.3008" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="1038" y="854.7349">Bool is not used in client code.</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="103.8125" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="396" x="615" y="798.3281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="685" y="819.4668"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="685" y="819.4668">Add out Value</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="625" y="833.4355">std::string value ="NXP"</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="339" x="625" y="847.4043">webserver_ addOutValue(addOutValue(" String",value)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="322" x="625" y="861.373">webserver_ addOutValue(addOutValue(" Bool",true)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="376" x="625" y="875.3418">webserver_ addOutValue(addOutValue(" Int",frame_counter)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="313" x="625" y="889.3105">webserver_ addOutValue(addOutValue(" Double",)</text><path d="M352.5,933.543 L352.5,958.6758 A0,0 0 0 0 352.5,958.6758 L653.5,958.6758 A0,0 0 0 0 653.5,958.6758 L653.5,951.543 L673.5,946.1094 L653.5,943.543 L653.5,943.543 L643.5,933.543 L352.5,933.543 A0,0 0 0 0 352.5,933.543 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M643.5,933.543 L643.5,943.543 L653.5,943.543 L643.5,933.543 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="364" cy="946.1758" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="369.5" y="950.6099">This function sends all prepared out value.</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="279" x="673.5" y="922.1406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="687.5" y="943.2793"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="255" x="687.5" y="943.2793">webserver_ sendOutSharedValues()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="219" x="683.5" y="957.248">void room::sendOutSharedValues()</text><path d="M972.5,1001.4805 L972.5,1010.0469 L952.5,1014.0469 L972.5,1018.0469 L972.5,1026.6133 A0,0 0 0 0 972.5,1026.6133 L1190.5,1026.6133 A0,0 0 0 0 1190.5,1026.6133 L1190.5,1011.4805 L1180.5,1001.4805 L972.5,1001.4805 A0,0 0 0 0 972.5,1001.4805 " fill="#FBFB77" filter="url(#f1qb7zvlpssfmp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1180.5,1001.4805 L1180.5,1011.4805 L1190.5,1011.4805 L1180.5,1001.4805 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="984" cy="1014.1133" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="989.5" y="1018.5474">Send output values to clients</text><rect fill="#FEFECE" filter="url(#f1qb7zvlpssfmp)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="279" x="673.5" y="990.0781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="0" x="687.5" y="1011.2168"/><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="255" x="687.5" y="1011.2168">webserver_ sendOutSharedValues()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="683.5" y="1025.1855">webserver_ sendOutSharedValues()</text><ellipse cx="813" cy="1069.0156" fill="#FFFFFF" filter="url(#f1qb7zvlpssfmp)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="813" cy="1069.0156" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="50.9531" y2="70.9531"/><polygon fill="#A80036" points="809,60.9531,813,70.9531,817,60.9531,813,64.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="104.9219" y2="124.9219"/><polygon fill="#A80036" points="809,114.9219,813,124.9219,817,114.9219,813,118.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="158.8906" y2="178.8906"/><polygon fill="#A80036" points="809,168.8906,813,178.8906,817,168.8906,813,172.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="212.8594" y2="232.8594"/><polygon fill="#A80036" points="809,222.8594,813,232.8594,817,222.8594,813,226.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.25" x2="454.25" y1="354.7969" y2="374.7969"/><polygon fill="#A80036" points="450.25,364.7969,454.25,374.7969,458.25,364.7969,454.25,368.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1171.75" x2="1171.75" y1="354.7969" y2="374.7969"/><polygon fill="#A80036" points="1167.75,364.7969,1171.75,374.7969,1175.75,364.7969,1171.75,368.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="844.25" x2="844.25" y1="552.6094" y2="572.6094"/><polygon fill="#A80036" points="840.25,562.6094,844.25,572.6094,848.25,562.6094,844.25,566.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1091.75" x2="844.25" y1="496.6406" y2="496.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="844.25" x2="844.25" y1="496.6406" y2="518.6406"/><polygon fill="#A80036" points="840.25,508.6406,844.25,518.6406,848.25,508.6406,844.25,512.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1251.75" x2="1499.25" y1="496.6406" y2="496.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1499.25" x2="1499.25" y1="496.6406" y2="518.6406"/><polygon fill="#A80036" points="1495.25,508.6406,1499.25,518.6406,1503.25,508.6406,1499.25,512.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="844.25" x2="844.25" y1="718.3281" y2="736.3281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="844.25" x2="1159.75" y1="736.3281" y2="736.3281"/><polygon fill="#A80036" points="1149.75,732.3281,1159.75,736.3281,1149.75,740.3281,1153.75,736.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1499.25" x2="1499.25" y1="552.6094" y2="736.3281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1499.25" x2="1183.75" y1="736.3281" y2="736.3281"/><polygon fill="#A80036" points="1193.75,732.3281,1183.75,736.3281,1193.75,740.3281,1189.75,736.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1171.75" x2="1171.75" y1="464.6406" y2="484.6406"/><polygon fill="#A80036" points="1167.75,474.6406,1171.75,484.6406,1175.75,474.6406,1171.75,478.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="698.5" x2="454.25" y1="298.8281" y2="298.8281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.25" x2="454.25" y1="298.8281" y2="320.8281"/><polygon fill="#A80036" points="450.25,310.8281,454.25,320.8281,458.25,310.8281,454.25,314.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="927.5" x2="1171.75" y1="298.8281" y2="298.8281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1171.75" x2="1171.75" y1="298.8281" y2="320.8281"/><polygon fill="#A80036" points="1167.75,310.8281,1171.75,320.8281,1175.75,310.8281,1171.75,314.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.25" x2="454.25" y1="408.7656" y2="766.3281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="454.25" x2="801" y1="766.3281" y2="766.3281"/><polygon fill="#A80036" points="791,762.3281,801,766.3281,791,770.3281,795,766.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1171.75" x2="1171.75" y1="748.3281" y2="766.3281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1171.75" x2="825" y1="766.3281" y2="766.3281"/><polygon fill="#A80036" points="835,762.3281,825,766.3281,835,770.3281,831,766.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="266.8281" y2="286.8281"/><polygon fill="#A80036" points="809,276.8281,813,286.8281,817,276.8281,813,280.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="778.3281" y2="798.3281"/><polygon fill="#A80036" points="809,788.3281,813,798.3281,817,788.3281,813,792.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="902.1406" y2="922.1406"/><polygon fill="#A80036" points="809,912.1406,813,922.1406,817,912.1406,813,916.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="970.0781" y2="990.0781"/><polygon fill="#A80036" points="809,980.0781,813,990.0781,817,980.0781,813,984.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="813" x2="813" y1="1038.0156" y2="1058.0156"/><polygon fill="#A80036" points="809,1048.0156,813,1058.0156,817,1048.0156,813,1052.0156" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[06058525617ed96be66fe901517afad4]
@startuml
title Server.cpp Part:3 (Streaming)


start
 
:**image size**;
:int size = 172800;
:int frame_counter = 0;
:char*image=(char*)malloc(size);


if (  Simple image buffer 320 * 180 * 3) then (for)
  : **for(int i =0; i<size;i++)** ;
 
  :           **image[i]=127**;
  

else (for )
  :for (;;);
  
  
: webserver_** getIntValueByName**("max_ color",255)

std::string room::getStringValueByName (std::string name , std::string default_val)

Value of HTML tag "max_color", Second parameter is value "max_color";

note right
 * This function returns int value of shared variable.
 * User can select the Maximum color value (between 1-255). 
 * Binary Frame- buffer of bytes (0-255) 
end note


 if (if webserver_ isRunning) then (If);


:( webserver_ **getBoolValueByName**("stream_ en",false) ;

 :**webserver_ streamBuffer(image, size, "main")**
 
 void room::streamBuffer( char* buffer, int size , std::**string header**)

 **buffer Array of chars**
 
 **size: Size of buffer**
 
 **header:Some header for buffer. Some information what buffer contains.**;
 
 note right
 * This function allows to stream buffer of bytes.
 end note
 
else (else )
  :break;
  
  note right
  * server is not Running
  end note
  
  endif

endif

:               **Add out Value**
std::string value ="NXP"
webserver_ addOutValue(addOutValue(" String",value)
webserver_ addOutValue(addOutValue(" Bool",true)
webserver_ addOutValue(addOutValue(" Int",frame_counter)
webserver_ addOutValue(addOutValue(" Double",);
note left
*This function prepares value for future send to all clients. It allows to share some results.
end note
note right
*Bool is not used in client code.
end note

: **webserver_ sendOutSharedValues()**
void room::sendOutSharedValues();

note left
*This function sends all prepared out value.
end note

: **webserver_ sendOutSharedValues()**
webserver_ sendOutSharedValues();

note right
*Send output values to clients
end note




stop
@enduml

PlantUML version 1.2019.12(Sun Nov 03 10:24:54 UTC 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>